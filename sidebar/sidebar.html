<template x-if="accessToken">
  <div class="sidebar p-4 bg-gray-50 border-r border-gray-200 overflow-y-auto">

    <h2 class="text-xl font-bold mb-4">Rooms</h2>

    <div class="room-list space-y-1 px-2">
      <ul class="sidebar-list space-y-1">

        <template x-for="room in rooms" :key="room.roomId">
          <li class="flex items-center justify-between cursor-pointer p-2 rounded hover:bg-gray-200"
              :class="{ 'bg-gray-300 font-bold': room.roomId === roomId }">

            <span class="flex-1 truncate"
                  @click="switchRoom(room.roomId)"
                  x-text="room.name || room.roomId"></span>

            <button class="text-red-600 font-bold ml-2"
                    @click.stop="leaveRoom(room.roomId)">
              ×
            </button>

          </li>
        </template>

      </ul>
    </div>

    <div class="mt-4">
      <input x-model="newRoomName"
             placeholder="New room name"
             class="border p-2 w-full mb-2 rounded">

      <button @click="createRoom()"
              class="bg-indigo-500 text-white p-2 w-full rounded hover:bg-indigo-600 transition">
        Create Room
      </button>

      <p x-show="newRoomId" class="text-xs mt-1">
        Room ID: <span x-text="newRoomId"></span>
      </p>
    </div>


    <template x-if="roomId">
      <div class="mt-6 p-4 bg-gray-100 rounded">

        <h3 class="text-sm font-semibold text-gray-700 mb-2">Room members</h3>

        <ul class="text-sm space-y-1">

          <template x-for="member in roomMembers" :key="member.userId">
            <li class="flex items-center justify-between">

              <span class="truncate"
                    x-text="member.displayName + ' (' + member.userId + ')'"></span>

              <button class="text-red-600 font-bold ml-2"
                      @click.stop="kickUser(member.userId)">
                ×
              </button>

            </li>
          </template>

        </ul>

      </div>
    </template>

  </div>
</template>
